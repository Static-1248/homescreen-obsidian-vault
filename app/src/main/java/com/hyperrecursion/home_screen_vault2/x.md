**应用程序介绍**

该应用程序提供一个 Android 桌面小组件，允许用户直接通过桌面小组件浏览 Obsidian 笔记仓库（Vault，实质上是一个包含文件夹和markdown笔记的普通文件夹）内的文件系统结构，并在点击时启动 Obsidian 打开相应的笔记。它旨在为 Obsidian 用户提供一种快速简便的方式来访问他们的笔记仓库，而无需打开 Obsidian 应用程序。

**应用程序需求**

* **核心功能：**
    * 浏览 Obsidian Vault 中的目录和笔记
    * 启动 Obsidian 打开特定的笔记
* **性能优化：**
    * 在后台执行文件树扫描
    * 缓存扫描结果
    * 仅在必要时更新小组件
* **文件系统扫描策略：**
    * 定期扫描小组件内可见部分的文件树，以检测文件和文件夹的更改。
    * 分为两种扫描状态：高频扫描和低频扫描，高频扫描状态以较短的间隔（如60s）扫描，低频扫描状态以较长的间隔（如1小时）扫描，以适应用户写作时和闲置时的两种状态。
    * **以下条件下由低频扫描态切换到高频扫描态：**
        * 检测到可见部分的文件树发生更改
        * 用户手动刷新小组件
        * 用户展开或折叠文件夹
        * 用户更改排序顺序
    * **以下条件下由高频扫描态切换到低频扫描态：**
        * 可见部分的文件树连续数次（如10次）扫描没有发生更改
* **用户界面增强：**
    * 文件夹默认折叠，但用户可以在小组件中展开
    * 可为每个文件夹设置文件排序顺序（按字典序、修改日期或创建日期，正/倒序）
    * 也可手动排序同级文件夹的展示顺序
* **状态管理：**
    * 保存每个组件中的每个文件夹的显示状态（排序顺序、展开状态），和APP的设置。
* **其他功能：**
    * 全局刷新按钮，用于重新扫描可见部分并进入高频扫描态
* **可选功能：**
    * 重置 Vault 状态选项


**应用程序架构（旧版，待修改）**

* **MainActivity：**应用程序的启动活动，负责初始化小组件和用户界面。
* **GlanceWidgetService：**提供小组件实现的 Glance 服务。
* **WidgetData：**一个数据类，包含小组件所需的数据（例如，Obsidian Vault 路径）。
* **WidgetReceiver：**一个广播接收器，接收来自小组件的更新请求。
* **WidgetState：**一个数据类，存储小组件的自定义状态，例如展开的文件夹和排序顺序。
* **AppConfig：**一个数据类，存储应用程序的配置，例如高低频扫描时间和目标 Vault 路径。

**其他信息**

* 该应用程序使用 Jetpack Compose 开发主页面，使用Jetpack Glance 开发小组件。
* 该应用程序调用 Obsidian APP 提供的 URI 接口，可启动 Obsidian 并打开特定的笔记。
* 该应用程序遵循 Android 开发最佳实践，例如使用 MVVM 架构。